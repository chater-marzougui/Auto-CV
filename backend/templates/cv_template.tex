
\documentclass[11pt,a4paper]{moderncv}

% ModernCV themes
\moderncvstyle{classic}
\moderncvcolor{blue}

% Character encoding
\usepackage[utf8]{inputenc}

% Page margins
\usepackage[scale=0.75]{geometry}

% Personal data
\name{{ personal_info.first_name }}{{ personal_info.last_name }}
\title{{ personal_info.title }}
\address{{ personal_info.address }}{{ personal_info.city }}{{ personal_info.postal_code }}
\phone[mobile]{{ personal_info.phone }}
\email{{ personal_info.email }}
{% if personal_info.linkedin %}\social[linkedin]{{ personal_info.linkedin }}{% endif %}
{% if personal_info.github %}\social[github]{{ personal_info.github }}{% endif %}

\begin{document}

\makecvtitle

% Professional Summary
{% if personal_info.summary %}
\section{Professional Summary}
\cvitem{}{{ personal_info.summary }}
{% endif %}

% Technical Skills
{% if personal_info.skills %}
\section{Technical Skills}
{% for skill_category, skills in personal_info.skills.items() %}
\cvitem{{ skill_category }}{{ skills|join(', ') }}
{% endfor %}
{% endif %}

% Relevant Projects
\section{Relevant Projects}
{% for project in projects %}
\cventry{}{{ project.name }}{}{}{}
{
    \begin{itemize}
        \item {{ project.three_liner.replace('\n', '') }}
        \item Technologies: {{ project.technologies|join(', ') }}
        {% if project.stars > 0 %}\item GitHub: {{ project.stars }} stars, {{ project.forks }} forks{% endif %}
    \end{itemize}
    \textit{Repository: \url{{ project.url }}}
}
{% endfor %}

% Work Experience
{% if personal_info.experience %}
\section{Work Experience}
{% for job in personal_info.experience %}
\cventry{{ job.start_date }}--{{ job.end_date }}{{ job.title }}{{ job.company }}{{ job.location }}{}
{
    {% if job.description %}{{ job.description }}{% endif %}
    {% if job.achievements %}
    \begin{itemize}
        {% for achievement in job.achievements %}
        \item {{ achievement }}
        {% endfor %}
    \end{itemize}
    {% endif %}
}
{% endfor %}
{% endif %}

% Education
{% if personal_info.education %}
\section{Education}
{% for edu in personal_info.education %}
\cventry{{ edu.start_date }}--{{ edu.end_date }}{{ edu.degree }}{{ edu.institution }}{{ edu.location }}{{ edu.gpa }}{{ edu.description }}
{% endfor %}
{% endif %}

\end{document}
